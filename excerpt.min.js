!function(e,t){"use strict";"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e=e||self)}(this,(function(e){e.excerptHtml=function(e,t,r){var n=(new DOMParser).parseFromString(e,"text/html"),o=!1;for(parents=[],domTree=[],totalChar=0,lastTextN=null,walker=document.createTreeWalker(n.body,NodeFilter.SHOW_TEXT,null,null);walker.nextNode();)domTree.push(walker.currentNode);for(var a in domTree){var l=domTree[a];if(l.textContent.trim())if(o)parents.indexOf(l.parentNode)>-1?l.textContent="":l.parentNode.remove();else if(totalChar+l.textContent.length>t){o=!0,l.textContent=l.textContent.substr(0,t-totalChar),lastTextN=l;for(var i=l.parentNode;i;)parents.push(i),i=i.parentNode}else totalChar+=l.textContent.length}if(r){var s=lastTextN?lastTextN.parentNode:domTree.slice(-1);s.innerHTML=s.innerHTML+r}return n.body.innerHTML},e.excerptStripHtml=function(e,t){return(new DOMParser).parseFromString(e,"text/html").body.innerText.substr(0,t)}}));