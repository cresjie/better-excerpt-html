"use strict";window.excerptHtml=function(e,t,n){for(var r=(new DOMParser).parseFromString(e,"text/html"),o=!1,i=[],l=[],a=0,d=null,u=document.createTreeWalker(r.body,NodeFilter.SHOW_TEXT,null,null);u.nextNode();)l.push(u.currentNode);for(var f of l)if(f.textContent.trim())if(o)i.indexOf(f.parentNode)>-1?f.textContent="":f.parentNode.remove();else if(a+f.textContent.length>t){o=!0,f.textContent=f.textContent.substr(0,t-a),d=f;for(var s=f.parentNode;s;)i.push(s),s=s.parentNode}else a+=f.textContent.length;if(n){var x=d.parentNode;x.innerHTML=x.innerHTML+n}return r.body.innerHTML};