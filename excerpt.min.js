"use strict";window.excerptHtml=function(e,t,n){for(var r=(new DOMParser).parseFromString(e,"text/html"),o=!1,l=[],i=[],a=0,d=null,s=document.createTreeWalker(r.body,NodeFilter.SHOW_TEXT,null,null);s.nextNode();)i.push(s.currentNode);for(var u of i)if(u.textContent.trim())if(console.log(u.textContent),o)l.indexOf(u.parentNode)>-1?u.textContent="":u.parentNode.remove();else if(a+u.textContent.length>t){o=!0,u.textContent=u.textContent.substr(0,t-a),d=u;for(var x=u.parentNode;x;)l.push(x),x=x.parentNode}else a+=u.textContent.length;if(n){var f=d.parentNode;f.innerHTML=f.innerHTML+n}return r.body.innerHTML};